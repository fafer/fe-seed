!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):t.Wbxiaoxiao=n()}(this,function(){"use strict";function t(t,n){for(var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:".",e=t.split(i),o=n.split(i),a=Math.max(e.length,o.length),r=0;r<a;r++){var c=parseInt(e[r]||0),l=parseInt(o[r]||0);if(c>l)return 1;if(c<l)return-1}return 0}function n(){var t=A.match(j);return null!=t?t[1]:"999.999.999"}function i(){return A.match(j)}function e(){return A.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/)}function o(){return A.indexOf("Android")>-1}function a(){var t=navigator.platform,n=/win|x11|mac/i;return t.match(n)?"pc":"mobile"}function r(t){if(null===t)return null;if(void 0!==t)return Object.prototype.toString.call(t).slice(8,-1)}function c(){U=!0;for(var t=0,n=J.length;t<n;t++)d.apply(null,J[t])}function l(){if(L.length>0)return L.shift();var t;return t=document.createElement("iframe"),t.setAttribute("style","display:none;"),t.setAttribute("height","0px"),t.setAttribute("width","0px"),t.setAttribute("frameborder","0"),document.body.appendChild(t),t}function u(t){if(t){var n=l();n.src=t}}function f(t){!t||"pc"==M||!D||window.stub&&window.stub.jsCallMethod||window.prompt(t)}function d(t){return U?(d=W?u:B?f:function(t){console.log("unknown device: %s",t)},void d(t)):void J.push([t])}function p(t,n,i){var e="nativechannel://"+t+"?params="+encodeURIComponent(JSON.stringify(n));return"String"===r(i)&&(e+="&errcallback="+i),"pc"==M&&console.info("->Native：\n%s",decodeURIComponent(e)),e}function s(t){return["page_type","action_type"].forEach(function(n){var i=t[n],e=n.split("_").join("");t[e]=i}),t}function v(){return/complete|loaded|interactive/.test(document.readyState)&&document.body?void c():void document.addEventListener("DOMContentLoaded",function(){c()},!1)}function g(t){var n=/^(window(\.|\[('|")))/i,i=/\.|\[['|"]|['|"]\]\.{0,1}/gi;if(void 0!==t&&"String"===r(t)){var e=t.replace(n,"").split(i),o=e.join(".").replace(/\.{2,}/gi,".").replace(/\.+$/gi,"");return o}}function h(t){if(void 0==t)return!1;for(var n,i=r(t),e=window,o=arguments.length,a=Array(o>1?o-1:0),c=1;c<o;c++)a[c-1]=arguments[c];if("Function"===i)t.apply(this,a);else{if("String"!==i)return!1;n=g(t).split(".");for(var l=0,u=n.length;l<u;l++)e=e[n[l]];e.apply(this,a)}return!0}function m(t){if("Object"===r(t)&&"Object"===r(t.content)){var n=G,i=t.tradeline,e=t.content,o=e.pagetype;if("String"===r(i)||"String"===r(o)){n+=i+"?params=${params}";var a={isfinish:e.isfinish||!1};for(var c in a){var l=a[c];void 0!==r(l)&&null!==r(l)&&(n+="&"+c+"="+l)}return n=n.replace("${params}",encodeURIComponent(JSON.stringify(e)))}}}function _(t,n){for(var i in t){var e=t[i],o=r(e);"Object"!==o?o&&(n[i]=t[i]):(void 0==n[i]&&(n[i]={}),n[i]=_(e,n[i]))}return n}function b(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments[1];"Function"===r(t)&&(n=t,t={});var i={title:"提示",content:"",first_txt:"确定"};_(t,i),$("single",i,n)}function w(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments[1];"Function"===r(t)&&(n=t,t={});var i={title:"提示",content:"",fisrt_txt:"确定",second_txt:"取消"};_(t,i),$("double",i,n)}function x(t,n,i){var e={title:i||window.location.host+"提示",content:t||"",first_txt:"确定",second_txt:"取消"};$("double",e,n)}function y(t,n){var i={title:n||window.location.host+"提示",content:t||"",first_txt:"确定"};$("single",i)}function S(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"WEIXIN,FRIENDS",n=arguments[1],i=arguments[2];if("Object"===r(n)){var e=r(t),o=[],a=[],c={};o="Array"===e?t:"String"===e?t.split(","):["WEIXIN","FRIENDS"];for(var l=0;l<o.length;l++){c={},c.shareto=o[l];for(var u in n)c[u]=n[u];a.push(c)}tt(a,i)}}function I(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"WEIXIN,FRIENDS",n=arguments[1],i=arguments[2];"Object"===r(n)&&(n.type=void 0,n.data_url=void 0,S(t,n,i))}function k(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"WEIXIN,FRIENDS",n=arguments[1],i=arguments[2];"Object"===r(n)&&(n.type="imgshare",S(t,n,i))}function N(t,n){if("String"!==r(t))return t;n=n!==!1;var i="https:"==window.location.protocol?"https:":"http:",e=n===!0?/^(http:|https:)*\/\//i:/^\/\//i;return t=t.replace(e,i+"//")}var E={OS_NAME:"WBXiaoxiao",API_ROOT:"Wbxiaoxiao",SCHEMA:"wbxiaoxiao",URL_NAME:"wbxiaoxiao://jump/core/"},A=navigator.userAgent,O=E.OS_NAME,j=O+"\\/([\\d.]+)",R="WbxiaoxiaoJSBridgeNativeInvokeCallback",C=0;window[R]=function(){};var F=function(t,n){"Function"!==r(window[R])&&(window[R]=function(){});var i=r(t),e="__default__";return"String"===i?t:"Function"===i?(e=n||"JS_CALLBACK_"+ ++C,window[R][e]=t,R+"."+e):void 0},W=e(),B=o(),M=a(),U=!1,J=[],L=[],D=i(),X=t("7.6.0",n())>0,T=function(t){for(var n=arguments.length,i=Array(n>1?n-1:0),e=1;e<n;e++)i[e-1]=arguments[e];if(__WbxiaoxiaoJSBridgeBeforeInvoke__.apply(this,[t].concat(i))===!1)return!1;var o=i[0]||{},a=i[1],c=i[2],l=r(o);1!==i.length||"Object"===l||"Function"!==l&&"String"!==l||(a=o,o={}),a&&(o.callback=F(a)),"weblog"===t&&W&&X&&void 0!==o&&(o=s(o));var u=p(t,o,c);d(u)};v(),window.__WbxiaoxiaoJSBridgeBeforeInvoke__=function(){return!0};var V="production",P=function(t,n,i){var e=n;void 0!==i&&"production"!==V||(i=!0),"goback"==t&&i&&(n=function(){try{h(e)}catch(t){T("goback",{})}}),T("device_event",{type:t},n)},$=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments[2],e=n;e.type=t,T("dialog",e,i)},H=function(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"vertical",e=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"init";T("extend_btn",{cmd:e,type:i,config:t},n)},q=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];T("goback",{isBackToRoot:t})},K=function(t,n){T("pick_img",t,n)},z=function(){T("page_finish")},G=E.URL_NAME,Q=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"link",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i={tradeline:t,content:n};T("pagetrans",{protocol:m(i)})},Y=function(){T("reload")},Z=function(t){T("set_title",{title:t})},tt=function(t,n){T("share",{shareConfig:t},n)},nt=function(t){t+="",T("toast",{msg:t})},it=function(t,n){T("check_js_api",{actionName:t},n)},et=function(t,n){T("pull_to_refresh",{enablePullRefresh:t},n)},ot=function(t){T("fetch_header",t)},at=function(t){T("slip_enable",{enable:t})},rt=function(t){T("transmit_data",t)},ct={deviceEvent:P,dialog:$,extendBtn:H,goback:q,pickImg:K,pageFinish:z,pagetrans:Q,reload:Y,setTitle:Z,share:tt,toast:nt,checkJsApi:it,pullToReFresh:et,fetchHeader:ot,slipEnable:at,transmit_data:rt};T("page_finish");var lt={invoke:T,action:ct},ut={single:b,double:w,confirm:x,alert:y},ft={to:S,info:I,img:k},dt=function(t,n,i,e,o,a){var r=location.host.indexOf("test")!=-1?"//apptest.58.com/api/list":"//app.58.com/api/list",c={pagetype:"list",list_name:n,cateid:i,local_name:e,title:o,is_backtomain:!1,isfinish:!1,meta_url:r,meta_params:void 0,filter_params:void 0};_(a,c),Q(t,c)},pt=function(t,n,i,e,o,a){var r="appxiaoqu"==n?"//app.58.com/dict/detail":"//app.58.com/api/detail",c={pagetype:"detail",title:"详情",list_name:n,info_id:i,local_name:e,full_path:o,data_url:r,is_backtomain:!1,recomInfo:!1,use_cache:!0,charge_url:void 0,filter_params:void 0,common_params:void 0,pre_info:void 0};_(a,c),Q(t,c)},st=function(t,n,i){var e={pagetype:"common",url:t,title:n};_(i,e),Q("core",e)},vt={loadNativeList:dt,loadNativeDetail:pt,loadWebview:st},gt={dialog:ut,share:ft,pagetrans:vt},ht={getType:r,compareVersion:t,getVersion:n,adapterProtocol:N,createURI:m},mt=n(),_t={ENV:V,version:mt,appVersion:mt,sdkVersion:"1.1.1"},bt=lt;return bt.extend=gt,bt.common=_t,bt.util=ht,bt.callback=F,bt});